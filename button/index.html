<!doctype html>
<button id="ripple">
  Click me!
</button>

<style>
#ripple {
  width: 300px;
  height: 100px;
  font-size: 5em;
  background-color: rgb(255,64,129);
  background-image: paint(ripple);
  border: 0;
  box-shadow: 0 1px 1.5px 0 rgba(0,0,0,.12),0 1px 1px 0 rgba(0,0,0,.24);
  color: white;
  animation: pulse 2s ease-out infinite;
}

@keyframes pulse {
    0% {
        --tick: 0%;
    }
    50% {
        --tick: 100%;
    }
    100% {
        --tick: 0%;
    }
}

</style>

<script>
    CSS.registerProperty({
      name: '--tick',
      syntax: '<percentage>',
      initialValue: '0%'
    });
    (CSS.paintWorklet || paintWorklet).addModule('paintworklet.js');
    // const button = document.querySelector('#ripple');
    // let tick, animate = false;
    // document.querySelector('#ripple').addEventListener('mouseenter', evt => {
    //   console.log('in');
    //   tick = 0;
    //   requestAnimationFrame(function raf(now) {
    //       button.style.cssText = `--tick: ${modTick(5)};`;
    //       if(tick > 100) {
    //         return;
    //       }
    //       requestAnimationFrame(raf);
    //   })
    // })

    // document.querySelector('#ripple').addEventListener('mouseleave', evt => {
    //   console.log('out');
    //   requestAnimationFrame(function raf(now) {
    //       button.style.cssText = `--tick: ${modTick(-10)};`;
    //       if(tick < 0) {
    //         return;
    //       }
    //       requestAnimationFrame(raf);
    //   })
    // });

    // function modTick(delta) {
    //   tick += delta;
    //   return tick;
    // }
</script>
